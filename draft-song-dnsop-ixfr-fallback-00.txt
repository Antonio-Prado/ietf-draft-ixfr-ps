



Internet Engineering Task Force                                  L. Song
Internet-Draft                                Beijing Internet Institute
Intended status: Informational                            April 28, 2016
Expires: October 30, 2016


                     An IXFR Fallback to AXFR Case
                   draft-song-dnsop-ixfr-fallback-00

Abstract

   This memo introduces an IXFR fallback to AXFR observed during a
   multiple signer experiment conducted in Yeti project.  In the
   experiment IXFR client is designed to pull the zone from three IXFR
   servers who used their own key to sign the zone and produce different
   RRSIG records intentionally.  This configuration causes the failure
   of IXFR and fallback to AXFR in client side.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 30, 2016.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of




Song                    Expires October 30, 2016                [Page 1]

Internet-Draft        An IXFR Fallback to AXFR Case           April 2016


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  The AFXR fallback observed in MZSK experiment . . . . . . . .   3
   3.  Possible solution . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   4
   5.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   4

1.  Introduction

   In DNS specifications authoritative name server uses full zone
   transfer (AXFR) [RFC5936], incremental Zone Transfer (IXFR)[RFC1995],
   and NOTIFY [RFC1996] to achieve coherency of the zone contents.  IXFR
   is an optimization for large DNS zone transfer, which allows server
   only transfer the changed portion(s) to client.

   IXFR some times falls back to AXFR in condition that IXFR server
   cannot fulfill the given delta-update request (with multiple upstream
   servers).  It is not a protocol defect but do stimulate people to
   find optimization avoiding full zone transfer [I-D.kerr-ixfr-only] and
   trying to make a new IXFR protocol [I-D.ietf-dnsext-rfc1995bis-ixfr].

   RFC 5936[RFC5936] defines another AXFR fallback situation where
   client can stop IXFR if its upstream servers have different ideas of
   the zone contents.  IXFR fails due to the process of adding records
   that already exist or deleting records that do not exist

   This memo introduces an AXFR fallback case we observed during a DNS
   root experiment in Yeti project[Yeti-DNS-Project] which involves
   multiple root zone distribution master (DM).  It is designed that
   three DMs do have different "ideas" on how their keys are managed and
   produce different RRSIG records.

   REMOVE BEFORE Publication: The motivation of this memo is to ask for
   discussion in the community, about whether this specific fallback is
   viewed as a problem and is it worthwhile to develop IXFR further.  If
   not, this memo may provide some information and guidance to operators
   who do run authoritative servers in similar situation as it is done
   in Yeti experiment.








Song                    Expires October 30, 2016                [Page 2]

Internet-Draft        An IXFR Fallback to AXFR Case           April 2016


2.  The AFXR fallback observed in MZSK experiment

   As a background for this memo, the introduction of Yeti testbed and
   experiments can be found in [I-D.song-yeti-testbed-experience], and
   section 3.1 and 4.2 are relevant.  Conceptually, Yeti DNS intends to
   break one Signer/DM role into three which buys some properties in
   loosely cooperative environment, such as resilience to single point
   of failure, more independent choice for slave server, certain degree
   of transparency and management coordination for important zone (root
   zone in Yeti's case).

   Basically, in Yeti there are three distribution masters (DM) as IXFR
   server and a number of secondary servers as IXFR Client. One
   experiment is designed to test multiple signers with Multiple ZSK
   (MZSK).  It is required that all public ZSK used by DMs are included
   in the zone as a key set; and resolver can validate the message by
   picking one key from the key set. From DNSSEC point of view, it is
   OK.  However, different signers do produce different RRSIG RR which
   introduces zone inconsistency from beginning.

   It is observed that one IXFR client switched from one IXFR server to
   another, it received a zone update deleting RRSIG record that does not
   exist. Consequently the IXFR client rejected IXFR response and made
   a log indicating a bad data; and then asked for full zone transfer.
   Luckily, Yeti root zone is relatively small (691K), so the fallback
   to AXFR does not cause significant performance degeneration. But if
   operator does host big zone with MZSK model, it will cause problem based
   on current IXFR.

3.  Possible solution

   Generally, there are three considerations to this issue.  (Maybe it
   is not a problem indeed).

   o  To ask for development of new IXFR protocol to exclude the RRSIG
      as a specially zone content when it computes the diff sequences in
      MZSK model.

   o  To ask for adoption of IXFR-only draft and recommend it as default
      IXFR protocol for MZSK situation.

   o  To spot the AXFR fallback in MZSK as an operation concern.  And
      suggest small zone operator to configure AXFR as a default for zone
      transfer in order to reduce the latency caused by the fallback.







Song                    Expires October 30, 2016                [Page 3]

Internet-Draft        An IXFR Fallback to AXFR Case           April 2016


4.  Acknowledgments

   Thanks to .

5.  References

   [I-D.ietf-dnsext-rfc1995bis-ixfr]
              Hoenes, A., Sury, O., and S. Kerr, "DNS Incremental Zone
              Transfer Protocol (IXFR)", draft-ietf-dnsext-rfc1995bis-
              ixfr-01 (work in progress), April 2012.

   [I-D.kerr-ixfr-only]
              Sury, O. and S. Kerr, "IXFR-ONLY to Prevent IXFR Fallback
              to AXFR", draft-kerr-ixfr-only-01 (work in progress),
              February 2010.

   [I-D.song-yeti-testbed-experience]
              Song, D., Kerr, S., and D. Liu, "Experiences from Root
              Testbed in the Yeti DNS Project", draft-song-yeti-testbed-
              experience-01 (work in progress), December 2015.

   [RFC1995]  Ohta, M., "Incremental Zone Transfer in DNS", RFC 1995,
              DOI 10.17487/RFC1995, August 1996,
              <http://www.rfc-editor.org/info/rfc1995>.

   [RFC1996]  Vixie, P., "A Mechanism for Prompt Notification of Zone
              Changes (DNS NOTIFY)", RFC 1996, DOI 10.17487/RFC1996,
              August 1996, <http://www.rfc-editor.org/info/rfc1996>.

   [RFC5936]  Lewis, E. and A. Hoenes, Ed., "DNS Zone Transfer Protocol
              (AXFR)", RFC 5936, DOI 10.17487/RFC5936, June 2010,
              <http://www.rfc-editor.org/info/rfc5936>.

   [Yeti-DNS-Project]
              "Website of Yeti DNS Project", <http://www.yeti-dns.org>.

Author's Address

   Linjian Song
   Beijing Internet Institute
   2508 Room, 25th Floor, Tower A, Time Fortune
   Beijing  100028
   P. R. China

   Email: songlinjian@gmail.com
   URI:   http://www.biigroup.com/





Song                    Expires October 30, 2016                [Page 4]
